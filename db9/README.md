# Домашнее задание к занятию "`Репликация и масштабирование. Часть 2`" - `Кириенко Виталий`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

### Задание 1

```
Опишите основные преимущества использования масштабирования методами:
    1. активный master-сервер и пассивный репликационный slave-сервер;
    2. master-сервер и несколько slave-серверов;
    3. активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
    4. SAN-кластер.
```

```
    1. Master-Slave - используется для обеспечения отказоустойчивости приложений и позволяет распределить нагрузку на базу 
       данных между несколькими серверами.
    2. Master и несколько Slave - расширенный вариант предыдущего метода, за счет увеличения числа реплик увеличивается 
       отказоустойчивость и появляется возможность рапределить большую нагрузку.
    3. DRBD -  зеркалирование локального блочного устройства на удаленное, используется для обеспечения отказоустойчивости.
    4. SAN - подключение внешних устройств хранения данных (дисковых массивов, ленточных библиотек) для обеспечения 
       отказоустойчивости (например за счет организации RAID на дисковом массиве, резервного копирования данных на ленточную 
       библиотеку) и увеличения быстродейсвия (например за счет использования дисков NVME SSD в дисковом массиве).
```

---

### Задание 2

```
Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:
    - пользователи,
    - книги,
    - магазины (столбцы произвольно).
Опишите принципы построения системы и их разграничение или разбивку между базами данных.
```

```
Вертикальный шардинг
Выделим таблицу "Книги" в отдельную базу данных "Book", а таблицы "Пользователи" и "Магазины" в базу данных "User&Store"
```

`DB User&Store`

| Пользователи | Магазины    |
|--------------|-------------|
| 1. user-id   | 1. store-id |
| 2. user-name | 2. address  |
| 3. book-id   |             |

`DB Book`

| Книги        |
|--------------|
| 1. book-id   |
| 2. book-name |
| 3. author    |
| 4. year      |
| 5. store-id  |

```
Горизонтальный шардинг
В базе данных "User&Book" будет храниться таблица "Пользователи" и часть данных таблицы "Книги",
в базе данных "Book&Store" будет храниться часть данных таблицы "Книги" и таблица "Магазины"
```

`DB User&Book`

| Пользователи       | Книги              |
|--------------------|--------------------|
| ***1. user-id***   | ***1. book-id***   |
| ***2. user-name*** | ***2. book-name*** |
| ***3. book-id***   | 3. author          |
|                    | 4. year            |
|                    | 5. store-id        |

`DB Book&Store`

| Книги              | Магазины          |
|--------------------|-------------------|
| 1. book-id         | ***1. store-id*** |
| 2. book-name       | ***2. address***  |
| ***3. author***    |                   |
| ***4. year***      |                   |
| ***5. store-id***  |                   |

---

## Дополнительные задания (со звездочкой*)

Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 3

`Выполните настройку выбранных методов шардинга из задания 2.`

`Подойдет конфиг Docker, приведенный в презентации к лекции "Репликация и масштабирование. Часть 2"`
![Скриншот 1](https://github.com/vkir43/git/blob/main/db9/img/db34.jpg)

```
SQL скрипт для вертикального шардинга

CREATE DATABASE USER&STORE;

CREATE TABLE USER (
user-id INT(6) PRIMARY KEY,
user-name VARCHAR(30) NOT NULL,
book-id INT(6)
) ;

CREATE TABLE STORE (
store-id INT(6) PRIMARY KEY,
address VARCHAR(30) NOT NULL
) ;

CREATE DATABASE BOOK;

CREATE TABLE BOOK (
book-id INT(6) PRIMARY KEY,
book-name VARCHAR(30) NOT NULL,
author VARCHAR(30) NOT NULL,
year INT(4),
store-id INT(6)
) ;
```

```
SQL скрипт для горизонтального шардинга

CREATE DATABASE USER&BOOK;

CREATE TABLE USER (
user-id INT(6) PRIMARY KEY,
user-name VARCHAR(30) NOT NULL,
book-id INT(6)
) ;

CREATE TABLE BOOK (
book-id INT(6) PRIMARY KEY,
book-name VARCHAR(30) NOT NULL,
author VARCHAR(30) NOT NULL,
year INT(4),
store-id INT(6)
) ;

CREATE DATABASE BOOK&STORE;

CREATE TABLE BOOK (
book-id INT(6) PRIMARY KEY,
book-name VARCHAR(30) NOT NULL,
author VARCHAR(30) NOT NULL,
year INT(4),
store-id INT(6)
) ;

CREATE TABLE STORE (
store-id INT(6) PRIMARY KEY,
address VARCHAR(30) NOT NULL
) ;
```
